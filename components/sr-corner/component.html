<link rel="import" href="../../bower_components/polymer/polymer.html" />

<link rel="import" href="../sr-corner-clock/component.html" />
<link rel="import" href="../sr-corner-match/component.html" />
<link rel="import" href="../sr-corner-tla/component.html" />

<polymer-element name="sr-corner" attributes="arena corner stream show">
    <template>
        <style>
            :host {
                display: flex;
                flex-direction: row;
            }

            .bar {
                flex: 0 0 auto;
                width: 15%;
                background: {{ colour }};
            }

            main {
                flex: 1 1 auto;
                background: black;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
        </style>

        <aside class="bar"></aside>

        <main>
            <template if="{{ show == 'all' }}">
                <sr-corner-match id="match" arena="{{ arena }}" corner="{{ corner }}"></sr-corner-match>
            </template>

            <sr-corner-tla id="tla" arena="{{ arena }}" corner="{{ corner }}"></sr-corner-tla>

            <template if="{{ show == 'all' }}">
                <sr-corner-clock id="clock" arena="{{ arena }}"></sr-corner-clock>
            </template>
        </main>

        <aside class="bar"></aside>
    </template>

    <script>
        Polymer({
            comp: null,
            compChanged: function() {
                this.comp.api.getCorner(this.corner, function(corner) {
                    this.colour = corner.colour;
                }.bind(this));

                this.$.tla.stream = this.comp.stream;

                if (this.$.clock) {
                    this.$.clock.stream = this.comp.stream;
                }

                if (this.$.match) {
                    this.$.match.stream = this.comp.stream;
                }
            }
        });
    </script>
</polymer-element>
