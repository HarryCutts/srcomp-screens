<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>SR Arena Screen</title>

        <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>

        <link rel="import" href="components/sr-comp/component.html" />
        <link rel="import" href="components/sr-corner/component.html" />

        <style>
            body {
                display: flex;
                flex-direction: column;
                position: fixed;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                margin: 0;
            }

            body > sr-corner {
                display: flex;
                flex: 1 1 auto;
            }

            body > div {
                display: flex;
                flex: 0 0 auto;
                height: 30%;
            }

            body > div > sr-corner {
                flex: 1 1 auto;
            }
        </style>
    </head>

    <body>
        <sr-comp id="comp" apiurl="http://localhost:5112" streamurl="http://localhost:5001"></sr-comp>

        <sr-corner show="all"></sr-corner>

        <div>
            <sr-corner show="tla"></sr-corner>
            <sr-corner show="tla"></sr-corner>
            <sr-corner show="tla"></sr-corner>
        </div>

        <script>
            var parseArguments = function() {
                var fragment = window.location.search;
                var tokens = fragment.substr(1).split(',');
                return {arena: tokens[0], corner: tokens[1]};
            };

            document.addEventListener('polymer-ready', function() {
                var args = parseArguments();

                var otherCorners = [0, 1, 2, 3];
                otherCorners.splice(args.corner, 1);

                var comp = document.querySelector('#comp');
                var corners = document.querySelectorAll('sr-corner');
                for (var i = 0; i < corners.length; i++) {
                    corners[i].arena = args.arena;
                    if (i == 0) {
                        corners[i].corner = args.corner;
                    } else {
                        corners[i].corner = otherCorners[i - 1];
                    }
                    corners[i].comp = comp;
                }
            });
        </script>
    </body>
</html>
